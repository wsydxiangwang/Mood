{"version":3,"sources":["webpack:///./src/views/setting.vue?7bd7","webpack:///./src/views/setting.vue?f1ea","webpack:///src/views/setting.vue","webpack:///./src/views/setting.vue?5403","webpack:///./src/views/setting.vue","webpack:///./src/assets/cover.png"],"names":["render","_vm","this","_h","$createElement","_c","_self","directives","name","rawName","value","expression","modifiers","_m","ref","attrs","form","_l","formList","item","index","show","_e","key","staticClass","avatarUpload","avatar","model","callback","$$v","$set","upload_type","staticStyle","on","emailChange","placeholder","_v","slot","v","k","i","coverUpload","cover","password","onSubmit","staticRenderFns","image","title","describe","date","link","color","icp_txt","icp_link","bg_mood","bg_letter","bg_about","upload_oss","bg","fullscreenLoading","Object","keys","$info","length","update","watch","computed","$data","info","methods","$message","error","result","$http","post","data","status","img","upload","reduce","total","url","push","Promise","resolve","reject","append","JSON","stringify","formData","then","res","type","catch","err","all","map","setTimeout","message","$store","commit","body","$router","e","file","raw","includes","FormData","URL","createObjectURL","component","module","exports"],"mappings":"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","file":"js/chunk-75c9bf65.2b312982.js","sourcesContent":["import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./setting.vue?vue&type=style&index=0&id=6ddb70d5&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./setting.vue?vue&type=style&index=0&id=6ddb70d5&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"loading\",rawName:\"v-loading.fullscreen.lock\",value:(_vm.fullscreenLoading),expression:\"fullscreenLoading\",modifiers:{\"fullscreen\":true,\"lock\":true}}]},[_vm._m(0),_c('el-form',{ref:\"form\",attrs:{\"model\":_vm.form,\"label-width\":\"100px\"}},[_vm._l((_vm.formList[0]),function(item,index){return [(!item.show)?_c('el-form-item',{key:index,attrs:{\"label\":item.value}},[(item.key == 'avatar')?[_c('el-upload',{staticClass:\"avatar-uploader\",attrs:{\"action\":\"\",\"auto-upload\":false,\"show-file-list\":false,\"on-change\":_vm.avatarUpload}},[(_vm.avatar['url'] || _vm.form.avatar)?_c('img',{attrs:{\"src\":_vm.avatar['url'] || _vm.form.avatar}}):_c('i',{staticClass:\"el-icon-user\"})])]:(item.key == 'upload_type')?[_c('el-radio-group',{model:{value:(_vm.form.upload_type),callback:function ($$v) {_vm.$set(_vm.form, \"upload_type\", $$v)},expression:\"form.upload_type\"}},[_c('el-radio',{attrs:{\"label\":\"服务器\"}}),_c('el-radio',{attrs:{\"label\":\"阿里云OSS\"}})],1),(_vm.form.upload_type == '阿里云OSS')?[_vm._l((_vm.formList[2]),function(item,index){return [_c('el-input',{key:index,staticStyle:{\"margin-top\":\"10px\"},attrs:{\"placeholder\":item == 'domain' ? '自定义图片域名, 需解析至oss (http://img.baidu.com)' : item},model:{value:(_vm.form['upload_oss'][item]),callback:function ($$v) {_vm.$set(_vm.form['upload_oss'], item, $$v)},expression:\"form['upload_oss'][item]\"}})]})]:_vm._e()]:(item.key == 'email_message')?[_c('el-switch',{on:{\"change\":_vm.emailChange},model:{value:(_vm.form.email_message),callback:function ($$v) {_vm.$set(_vm.form, \"email_message\", $$v)},expression:\"form.email_message\"}})]:[_c('el-input',{attrs:{\"placeholder\":item.placeholder},model:{value:(_vm.form[item.key]),callback:function ($$v) {_vm.$set(_vm.form, item.key, $$v)},expression:\"form[item.key]\"}})]],2):_vm._e()]}),_c('h2',{staticClass:\"tit hint-tit\"},[_vm._v(\"首屏效果 \"),_c('el-popover',{attrs:{\"placement\":\"top-start\",\"width\":\"300\",\"trigger\":\"hover\"}},[_c('p',[_vm._v(\"背景颜色请选择类似图片颜色的透明度\")]),_c('img',{attrs:{\"src\":require(\"../assets/cover.png\")}}),_c('span',{attrs:{\"slot\":\"reference\"},slot:\"reference\"},[_vm._v(\"(view)\")])])],1),_vm._l((_vm.formList[1]),function(v,k,i){return [_c('el-form-item',{key:i+22,attrs:{\"label\":v}},[(k == 'image')?[_c('el-upload',{staticClass:\"cover\",attrs:{\"action\":\"\",\"auto-upload\":false,\"show-file-list\":false,\"on-change\":_vm.coverUpload}},[(_vm.cover['url'] || _vm.form.cover['image'])?_c('img',{attrs:{\"src\":_vm.cover['url'] || _vm.form.cover['image']}}):_c('i',{staticClass:\"el-icon-plus\"})]),_c('span',{staticClass:\"upload-image-size\"},[_vm._v(\"(1920*1080)\")])]:(k == 'link')?[_c('el-input',{attrs:{\"placeholder\":\"填写文章ID\"},model:{value:(_vm.form['cover'][k]),callback:function ($$v) {_vm.$set(_vm.form['cover'], k, $$v)},expression:\"form['cover'][k]\"}})]:(k == 'color')?[_c('el-color-picker',{attrs:{\"show-alpha\":\"\"},model:{value:(_vm.form['cover']['color']),callback:function ($$v) {_vm.$set(_vm.form['cover'], 'color', $$v)},expression:\"form['cover']['color']\"}})]:(k == 'icp_txt' || k == 'icp_link')?[_c('el-input',{attrs:{\"placeholder\":\"网站的备案信息, 有则填写\"},model:{value:(_vm.form['cover'][k]),callback:function ($$v) {_vm.$set(_vm.form['cover'], k, $$v)},expression:\"form['cover'][k]\"}})]:[_c('el-input',{model:{value:(_vm.form['cover'][k]),callback:function ($$v) {_vm.$set(_vm.form['cover'], k, $$v)},expression:\"form['cover'][k]\"}})]],2)]}),_c('h2',{staticClass:\"tit\"},[_vm._v(\"页面音乐\")]),_vm._l((_vm.formList[3]),function(v,k,i){return [_c('el-form-item',{key:i+222,attrs:{\"label\":v}},[_c('el-input',{attrs:{\"placeholder\":\"填写音乐链接地址\"},model:{value:(_vm.form['bg'][k]),callback:function ($$v) {_vm.$set(_vm.form['bg'], k, $$v)},expression:\"form['bg'][k]\"}})],1)]}),_c('h2',{staticClass:\"tit\"},[_vm._v(\"修改密码\")]),_c('el-form-item',{attrs:{\"label\":\"原密码\"}},[_c('el-input',{model:{value:(_vm.password.one),callback:function ($$v) {_vm.$set(_vm.password, \"one\", $$v)},expression:\"password.one\"}})],1),_c('el-form-item',{attrs:{\"label\":\"新密码\"}},[_c('el-input',{model:{value:(_vm.password.two),callback:function ($$v) {_vm.$set(_vm.password, \"two\", $$v)},expression:\"password.two\"}})],1),_c('el-form-item',[_c('el-button',{staticClass:\"submit\",attrs:{\"type\":\"primary\"},on:{\"click\":_vm.onSubmit}},[_vm._v(\"立即保存\")]),_c('span',{staticClass:\"hint\"},[_c('i',{staticClass:\"el-icon-warning\"}),_vm._v(\"信息需填写完整才能正常使用\")])],1)],2)],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"header\"},[_c('h2',{staticClass:\"tit\"},[_vm._v(\"网站信息\")])])}]\n\nexport { render, staticRenderFns }","<template>\n    <div v-loading.fullscreen.lock=\"fullscreenLoading\">\n        <div class=\"header\">\n            <h2 class=\"tit\">网站信息</h2>\n        </div>\n        <el-form ref=\"form\" :model=\"form\" label-width=\"100px\">\n\n            <template v-for=\"(item, index) in formList[0]\">\n\n                <el-form-item :label=\"item.value\" v-if=\"!item.show\" :key=\"index\">\n                    \n                    <template v-if=\"item.key == 'avatar'\">\n                        <el-upload\n                            action=\"\"\n                            class=\"avatar-uploader\"\n                            :auto-upload=\"false\"\n                            :show-file-list=\"false\"\n                            :on-change=\"avatarUpload\"\n                        >\n                            <img v-if=\"avatar['url'] || form.avatar\" :src=\"avatar['url'] || form.avatar\">\n                            <i v-else class=\"el-icon-user\"></i>\n                        </el-upload>\n                    </template>\n\n                    <template v-else-if=\"item.key == 'upload_type'\">\n                        <el-radio-group v-model=\"form.upload_type\">\n                            <el-radio label=\"服务器\"></el-radio>\n                            <el-radio label=\"阿里云OSS\"></el-radio>\n                        </el-radio-group>\n                        <template v-if=\"form.upload_type == '阿里云OSS'\">\n                            <template v-for=\"(item, index) in formList[2]\">\n                                <el-input \n                                    v-model=\"form['upload_oss'][item]\" \n                                    :placeholder=\"item == 'domain' ? '自定义图片域名, 需解析至oss (http://img.baidu.com)' : item\" \n                                    :key=\"index\"\n                                    style=\"margin-top:10px;\"\n                                ></el-input>\n                            </template>\n                        </template>\n                    </template>\n\n                    <template v-else-if=\"item.key == 'email_message'\">\n                        <el-switch @change=\"emailChange\" v-model=\"form.email_message\"></el-switch>\n                    </template>\n\n                    <template v-else>\n                        <el-input v-model=\"form[item.key]\" :placeholder=\"item.placeholder\"></el-input>\n                    </template>\n                </el-form-item> \n\n            </template>\n\n            <h2 class=\"tit hint-tit\">首屏效果 \n                  <el-popover\n                    placement=\"top-start\"\n                    width=\"300\"\n                    trigger=\"hover\"\n                >\n                    <p>背景颜色请选择类似图片颜色的透明度</p>\n                    <img src=\"../assets/cover.png\">\n                    <span slot=\"reference\">(view)</span>\n                </el-popover>\n            </h2>\n\n            <template v-for=\"(v, k, i) in formList[1]\">\n\n                <el-form-item :label=\"v\" :key=\"i+22\">\n\n                    <template v-if=\"k == 'image'\">\n                        <el-upload\n                            action=\"\"\n                            class=\"cover\"\n                            :auto-upload=\"false\"\n                            :show-file-list=\"false\"\n                            :on-change=\"coverUpload\"\n                        >\n                            <img v-if=\"cover['url'] || form.cover['image']\" :src=\"cover['url'] || form.cover['image']\">\n                            <i v-else class=\"el-icon-plus\"></i>\n                        </el-upload>\n                        <span class=\"upload-image-size\">(1920*1080)</span>\n                    </template>\n                    \n                    <template v-else-if=\"k == 'link'\">\n                        <el-input v-model=\"form['cover'][k]\" placeholder=\"填写文章ID\"></el-input>\n                    </template>\n\n                    <template v-else-if=\"k == 'color'\">\n                        <el-color-picker v-model=\"form['cover']['color']\" show-alpha></el-color-picker>\n                    </template>\n\n                    <template v-else-if=\"k == 'icp_txt' || k == 'icp_link'\">\n                        <el-input v-model=\"form['cover'][k]\" placeholder=\"网站的备案信息, 有则填写\"></el-input>\n                    </template>\n\n                    <template v-else>\n                        <el-input v-model=\"form['cover'][k]\"></el-input>\n                    </template>\n                </el-form-item>\n\n            </template>\n\n            <h2 class=\"tit\">页面音乐</h2>\n\n            <template v-for=\"(v, k, i) in formList[3]\">\n                <el-form-item :label=\"v\" :key=\"i+222\">\n                    <el-input v-model=\"form['bg'][k]\" placeholder=\"填写音乐链接地址\"></el-input>\n                </el-form-item>\n            </template>\n\n            <h2 class=\"tit\">修改密码</h2>\n\n            <el-form-item label=\"原密码\">\n                <el-input v-model=\"password.one\"></el-input>\n            </el-form-item>\n\n            <el-form-item label=\"新密码\">\n                <el-input v-model=\"password.two\"></el-input>\n            </el-form-item>\n\n            <el-form-item>\n                <el-button class=\"submit\" type=\"primary\" @click=\"onSubmit\">立即保存</el-button>\n                <span class=\"hint\"><i class=\"el-icon-warning\"></i>信息需填写完整才能正常使用</span>\n            </el-form-item>\n        </el-form>\n    </div>\n</template>\n\n<script>\nimport { mapState } from 'vuex'\nexport default {\n    data() {\n        return {\n            avatar: {},\n            cover: {},\n            formList: [\n                [\n                    {\n                        key: 'avatar',\n                        value: '管理员头像'\n                    },\n                    {\n                        key: 'name',\n                        value: '管理员昵称'\n                    },\n                    {\n                        key: 'comment_mark',\n                        value: '管理员标识'\n                    },\n                    {\n                        key: 'web_name',\n                        value: '网站昵称'\n                    },\n                    {\n                        key: 'web_describe',\n                        value: '网站描述'\n                    },\n                    {\n                        key: 'address',\n                        value: '网站地址'\n                    },\n                    {\n                        key: 'email',\n                        value: '评论邮箱'\n                    },\n                    {\n                        key: 'email_name',\n                        value: '评论昵称'\n                    },\n                    {\n                        key: 'upload_type',\n                        value: '文件上传'\n                    },\n                    {\n                        key: 'email_message',\n                        value: '评论通知'\n                    },\n                    {\n                        key: 'email_pass',\n                        value: '邮箱PASS',\n                        placeholder: '与评论邮箱一致的PASS, 只支持QQ邮箱',\n                        show: true\n                    },\n                ],\n                {\n                    image: '封面图',\n                    title: '标题',\n                    describe: '描述',\n                    date: '时间',\n                    link: '链接',\n                    color: '色调',\n                    icp_txt: '备案号',\n                    icp_link: '备案链接',\n                },\n                ['bucket', 'region', 'endPoint', 'accessKeySecret', 'accessKeyId', 'domain'],\n                {\n                    bg_mood: '文章列表',\n                    bg_letter: '短语列表',\n                    bg_about: '个人介绍',\n                }\n            ],\n            form: {\n                cover: {},\n                upload_oss: {},\n                upload_type: '服务器',\n                bg: {},\n            },\n            fullscreenLoading: false,\n\n            password: {}\n        }\n    },\n    mounted(){\n        if(Object.keys(this.$info).length > 0){\n            this.update()\n        }\n    },\n    watch: {\n        $info(){\n            this.update()\n        }\n    },\n    computed: {\n        ...mapState(['$data']),\n        $info(){\n            return Object.keys(this.$data).length > 0 ? this.$data.info : {}\n        }\n    },\n    methods: {\n        update(){\n            for(let i in this.$info){\n                this.$set(this.form, i, this.$info[i])\n            }\n            this.$set(this.formList[0][10], 'show', !this.$info['email_message'])\n        },\n        async onSubmit(){\n            /**\n             * 修改密码\n             */\n            if(Object.keys(this.password).length > 0){\n                if(!this.password['one']){\n                    this.$message.error('请输入原密码!')\n                    return;\n                }else if(!this.password['two']){\n                    this.$message.error('请填写新密码!')\n                    return\n                }\n\n                this.fullscreenLoading = true;\n\n                const result = await this.$http.post('/password', {password: this.password})\n                if(result.data.status === 2){\n                    this.fullscreenLoading = false;\n                    this.$message.error('原密码输入有误!')\n                    return;\n                }\n            }\n\n            this.fullscreenLoading = true;\n\n            /**\n             * 图片上传\n             */\n            const img = ['avatar', 'cover']\n            const upload = img.reduce((total, item) => {\n                if(this[item].url){\n                    total.push(new Promise((resolve, reject) => {\n                        \n                        this[item]['formData'].append('type', this.form.upload_type)\n\n                        // 默认添加页面填写的oss信息, 其他地方上传以获取数据库为主\n                        this[item]['formData'].append('upload_oss', JSON.stringify(this.form.upload_oss))\n\n                        this.$http.post('/upload', this[item].formData).then(res => {\n                            if(res.data.status == 100){\n                                this[item] = {};\n                                resolve({\n                                    type: item, \n                                    url: res.data.url\n                                })\n                            }else{\n                                reject()\n                            }\n                        }).catch(err => {\n                            reject(err)\n                        })\n                    }))\n                }\n                return total\n            }, [])\n\n            Promise.all(upload).then(res => {\n                if(res.length > 0){\n                    res.map(item => {\n                        if(item.type === 'avatar'){\n                            this.form['avatar'] = item.url\n                        }else{\n                            this.form.cover['image'] = item.url\n                        }\n                    })\n                }\n\n                // 提交信息\n                this.$http.post('/info', this.form).then(res => {\n                    if(res.data.status === 1){\n                        setTimeout(() => {\n                            this.$message({\n                                message: `更新成功`,\n                                type: 'success'\n                            });\n                            this.$store.commit('updataInfo', res.data.body)\n                            this.fullscreenLoading = false\n                            this.$router.push('/')\n                        }, 500)\n                    }\n                })\n            }).catch(err => {\n                this.fullscreenLoading = false\n                this.$message.error('图片上传失败，请检查网络是否正常 or OSS信息是否填写正确!')\n            })\n        },\n        emailChange(e){\n            this.formList[0][10].show = !e\n        },\n        // 保存临时图片\n        upload(type, file){\n            if (!file.raw.type.includes('image')) {\n                this.$message.error('请选择图片格式的文件!')\n                return\n            }\n            const formData = new FormData();\n            formData.append('file', file.raw);            \n            this[type] = {\n                url: URL.createObjectURL(file.raw),\n                formData\n            }\n\n            if(type === 'avatar'){\n                this.form['avatar'] = URL.createObjectURL(file.raw)\n            }else{\n                this.form['cover']['image'] = URL.createObjectURL(file.raw)\n            }\n        },\n        avatarUpload(file){\n            this.upload('avatar', file)\n        },\n        coverUpload(file){\n            this.upload('cover', file)\n        },\n    }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.avatar-uploader{\n    height: 100px;\n    /deep/ .el-upload{\n        height: 100px;\n        width: 100px;\n        overflow: hidden;\n        border: 4px solid #dce7ff;\n        border-radius: 50%;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        i{\n            font-size: 30px;\n            color: #dcdfe6;\n        }\n        img{\n            width: 100%;\n        }\n    }\n}\n.cover{\n    overflow: hidden;\n    /deep/ .el-upload{\n        width: 300px;\n        height: 170px;\n        border-radius: 4px;\n        overflow: hidden;\n        border: 6px solid #dce7ff;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        img{\n            width: 100%;\n            height: 100%;\n            border-radius: 2px;\n        }\n        i{\n            font-size: 30px;\n            color: #dcdfe6;\n            vertical-align: middle;\n        }\n    }\n}\n.upload-image-size{\n    position: absolute;\n    top: 20px;\n    font-size: 12px;\n    right: calc(100% + 14px);\n    color: #b3b3b3;\n}\nh2.tit{\n    margin: 50px 0 30px;\n    span{\n        font-size: 12px;\n        color: #b3b3b3;\n    }\n}\n\n.el-popover {\n    p{\n        margin-bottom: 5px;\n    }\n    img{\n        width: 100%;\n        border-radius: 4px;\n    }\n}\n.submit:hover + .hint{\n    opacity: 1;\n}\n.hint{\n    font-size: 12px;\n    color: #ff4444;\n    margin-left: 10px;\n    letter-spacing: 2px;\n    opacity: 0;\n    transition: all .3s;\n}\n@media screen and (max-width: 600px) {\n    .cover{\n        /deep/ .el-upload{\n            width: 100%;\n        }\n    }\n    .hint{\n        opacity: 1;\n        display: block;\n    }\n    /deep/ .el-form-item{\n        label{\n            width: 90px !important;\n        }\n        .el-form-item__content{\n            margin-left: 90px !important;\n        }\n    }\n}\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./setting.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./setting.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./setting.vue?vue&type=template&id=6ddb70d5&scoped=true&\"\nimport script from \"./setting.vue?vue&type=script&lang=js&\"\nexport * from \"./setting.vue?vue&type=script&lang=js&\"\nimport style0 from \"./setting.vue?vue&type=style&index=0&id=6ddb70d5&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6ddb70d5\",\n  null\n  \n)\n\nexport default component.exports","module.exports = __webpack_public_path__ + \"img/cover.b5d33f25.png\";"],"sourceRoot":""}