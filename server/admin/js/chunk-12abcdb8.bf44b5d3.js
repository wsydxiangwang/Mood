(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-12abcdb8"],{"234d":function(t,e,a){},edb4:function(t,e,a){"use strict";var s=a("234d"),i=a.n(s);i.a},f7ff:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:t.fullscreenLoading,expression:"fullscreenLoading",modifiers:{fullscreen:!0,lock:!0}}],staticClass:"article-new"},[a("section",[a("el-input",{attrs:{placeholder:"标题",clearable:""},model:{value:t.data.title,callback:function(e){t.$set(t.data,"title",e)},expression:"data.title"}})],1),a("mavon-editor",{ref:"md",staticStyle:{height:"70vh"},attrs:{ishljs:!0,codeStyle:"monokai-sublime"},on:{change:t.change},model:{value:t.data.content,callback:function(e){t.$set(t.data,"content",e)},expression:"data.content"}}),a("section",[t.isReset?a("date",{attrs:{originalDate:t.data.time},on:{getDate:t.getDate}}):t._e(),a("div",{staticClass:"intro"},[a("el-input",{attrs:{placeholder:"文章摘要",clearable:""},model:{value:t.data.describe,callback:function(e){t.$set(t.data,"describe",e)},expression:"data.describe"}})],1),a("div",{staticClass:"picture"},[a("el-input",{attrs:{placeholder:"音乐地址",clearable:""},model:{value:t.data.music,callback:function(e){t.$set(t.data,"music",e)},expression:"data.music"}})],1),a("div",{staticClass:"picture"},[a("el-input",{attrs:{placeholder:"封面图片",clearable:""},model:{value:t.data.image,callback:function(e){t.$set(t.data,"image",e)},expression:"data.image"}})],1)],1),a("el-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("提交")])],1)},i=[],l=a("e12b"),n=a("b2d8"),c=(a("64e1"),{components:{date:l["a"],mavonEditor:n["mavonEditor"]},data(){return{data:{title:"",content:"",contentHtml:"",time:{},category:"",image:"",music:""},fullscreenLoading:!1,isReset:!0,id:""}},methods:{change(t,e){this.data.contentHtml=e,this.data.content=t,this.data.words=t.length},submit(){if(this.data.time&&"{}"!=JSON.stringify(this.data.time)){for(let t in this.data)""==this.data[t]&&this.$delete(this.data,t);this.fullscreenLoading=!0,this.id?this.$http.put(`article/${this.data._id}`,this.data).then(t=>{console.log(t),setTimeout(()=>{this.fullscreenLoading=!1,1==t.data.status?(this.$message({message:"修改成功",type:"success"}),this.$router.push("/article")):this.$message.error("修改失败，请重新提交")},1e3)}):this.$http.post("article",this.data).then(t=>{setTimeout(()=>{this.fullscreenLoading=!1,this.$message({message:"发表成功",type:"success"}),this.$router.push("/article")},1e3)})}else this.$message.error("请选择时间")},getDate(t){this.data.time=t},async loadData(t){const e=await this.$http.get(`article/${t}`);this.data=e.data,this.isReset=!1,this.$nextTick(()=>{this.isReset=!0})}},created(){this.id=this.$route.query.id,this.id&&this.loadData(this.id)}}),d=c,o=(a("edb4"),a("2877")),r=Object(o["a"])(d,s,i,!1,null,null,null);e["default"]=r.exports}}]);
//# sourceMappingURL=chunk-12abcdb8.bf44b5d3.js.map