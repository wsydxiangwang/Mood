{"version":3,"sources":["webpack:///./src/views/article/info.vue?ae98","webpack:///./src/components/date.vue?03ba","webpack:///src/components/date.vue","webpack:///./src/components/date.vue?aaba","webpack:///./src/components/date.vue","webpack:///./src/views/article/info.vue?80d8","webpack:///src/views/article/info.vue","webpack:///./src/views/article/info.vue?054f","webpack:///./src/views/article/info.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","model","value","callback","$$v","expression","staticRenderFns","props","watch","val","$emit","originalDate","JSON","stringify","component","directives","name","rawName","modifiers","staticClass","_v","data","$set","ref","on","change","$imgAdd","$imgDel","time","getDate","_e","uploadToggle","music","image","musicUpload","url","_s","imgUpload","submit","components","date","mavonEditor","title","content","contentHtml","describe","hide","isReset","id","upload","fullscreenLoading","loading","$route","query","loadData","computed","methods","file","uploads","type","raw","includes","$message","error","formData","FormData","append","$data","info","upload_type","URL","createObjectURL","pos","$file","formdata","$http","post","then","res","$refs","md","$img2Url","words","length","map","i","result","status","slice","_id","mesg","email","web_name","web_address","setTimeout","message","$router","push","$infoUpdate","$loading","target","get","body","$nextTick","close"],"mappings":"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","file":"js/chunk-8c1be4f6.941d8cb5.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./info.vue?vue&type=style&index=0&id=c318d98c&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./info.vue?vue&type=style&index=0&id=c318d98c&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-date-picker',{attrs:{\"type\":\"datetime\",\"value-format\":\"yyyy/MM/dd HH:mm\",\"placeholder\":\"选择日期时间\"},model:{value:(_vm.value),callback:function ($$v) {_vm.value=$$v},expression:\"value\"}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <el-date-picker\r\n        v-model=\"value\"\r\n        type=\"datetime\"\r\n        value-format=\"yyyy/MM/dd HH:mm\"\r\n        placeholder=\"选择日期时间\"\r\n    >\r\n    </el-date-picker>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    props: ['originalDate'],\r\n    data(){\r\n        return{\r\n            value: '',\r\n        }\r\n    },\r\n    watch: {\r\n        value(val){\r\n            this.$emit('getDate', val)\r\n        }\r\n    },\r\n    mounted(){\r\n        // 默认时间\r\n        if(this.originalDate && JSON.stringify(this.originalDate) != '{}'){\r\n            this.value = this.originalDate\r\n        }\r\n    }\r\n}\r\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./date.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./date.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./date.vue?vue&type=template&id=e42f86a4&\"\nimport script from \"./date.vue?vue&type=script&lang=js&\"\nexport * from \"./date.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"loading\",rawName:\"v-loading.fullscreen.lock\",value:(_vm.fullscreenLoading),expression:\"fullscreenLoading\",modifiers:{\"fullscreen\":true,\"lock\":true}}],staticClass:\"article-new\"},[_c('section',[_c('h2',{staticClass:\"tit\"},[_vm._v(\"无人问津的心情，在黑纸白字间游荡！\")]),_c('el-input',{attrs:{\"placeholder\":\"标题\",\"clearable\":\"\"},model:{value:(_vm.data.title),callback:function ($$v) {_vm.$set(_vm.data, \"title\", $$v)},expression:\"data.title\"}})],1),_c('mavon-editor',{ref:\"md\",attrs:{\"ishljs\":true,\"subfield\":false},on:{\"change\":_vm.change,\"imgAdd\":_vm.$imgAdd,\"imgDel\":_vm.$imgDel},model:{value:(_vm.data.content),callback:function ($$v) {_vm.$set(_vm.data, \"content\", $$v)},expression:\"data.content\"}}),_c('section',[(_vm.isReset)?_c('date',{attrs:{\"originalDate\":_vm.data.time},on:{\"getDate\":_vm.getDate}}):_vm._e(),_c('el-input',{attrs:{\"placeholder\":\"文章摘要\",\"prefix-icon\":\"el-icon-document\",\"clearable\":\"\"},model:{value:(_vm.data.describe),callback:function ($$v) {_vm.$set(_vm.data, \"describe\", $$v)},expression:\"data.describe\"}}),(!_vm.uploadToggle)?_c('div',{staticClass:\"upload-box\"},[_c('el-upload',{staticClass:\"upload-demo\",attrs:{\"auto-upload\":false,\"show-file-list\":false,\"on-change\":_vm.musicUpload,\"action\":\"\",\"drag\":\"\"}},[(_vm.data.music && _vm.data.music.url)?[_c('i',{staticClass:\"el-icon-headset\"}),_c('div',{staticClass:\"el-upload__text\"},[_vm._v(_vm._s(_vm.data['music'].name))])]:[_c('i',{staticClass:\"el-icon-headset\"}),_c('div',{staticClass:\"el-upload__text\"},[_vm._v(\"背景音乐\")])]],2),_c('el-upload',{staticClass:\"upload-demo\",attrs:{\"auto-upload\":false,\"show-file-list\":false,\"on-change\":_vm.imgUpload,\"action\":\"\",\"drag\":\"\"}},[(_vm.data.image && _vm.data.image.url)?_c('img',{attrs:{\"src\":_vm.data.image.url}}):_vm._e(),_c('i',{staticClass:\"el-icon-picture-outline-round\"}),_c('div',{staticClass:\"el-upload__text\"},[_vm._v(\"封面图片 (680*440)\")])])],1):[_c('el-input',{attrs:{\"placeholder\":\"音乐地址\",\"prefix-icon\":\"el-icon-headset\",\"clearable\":\"\"},model:{value:(_vm.data.music.url),callback:function ($$v) {_vm.$set(_vm.data.music, \"url\", $$v)},expression:\"data.music.url\"}}),_c('el-input',{attrs:{\"placeholder\":\"封面图片\",\"prefix-icon\":\"el-icon-picture-outline-round\",\"clearable\":\"\"},model:{value:(_vm.data.image.url),callback:function ($$v) {_vm.$set(_vm.data.image, \"url\", $$v)},expression:\"data.image.url\"}})],_c('el-switch',{attrs:{\"active-text\":\"输入链接\",\"inactive-text\":\"文件上传\"},model:{value:(_vm.uploadToggle),callback:function ($$v) {_vm.uploadToggle=$$v},expression:\"uploadToggle\"}}),_c('el-switch',{attrs:{\"inactive-text\":\"发布文章\",\"active-text\":\"隐藏文章\"},model:{value:(_vm.data.hide),callback:function ($$v) {_vm.$set(_vm.data, \"hide\", $$v)},expression:\"data.hide\"}})],2),_c('el-button',{staticClass:\"submit\",attrs:{\"type\":\"primary\"},on:{\"click\":_vm.submit}},[_vm._v(\"SUBMIT\")])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"article-new\" v-loading.fullscreen.lock=\"fullscreenLoading\">\r\n\r\n        <section>\r\n            <h2 class=\"tit\">无人问津的心情，在黑纸白字间游荡！</h2>\r\n            <el-input\r\n                placeholder=\"标题\"\r\n                v-model=\"data.title\"\r\n                clearable>\r\n            </el-input>\r\n        </section>\r\n\r\n        <mavon-editor \r\n            :ishljs=\"true\" \r\n            @change=\"change\" \r\n            v-model=\"data.content\" \r\n            :subfield=\"false\"\r\n            @imgAdd=\"$imgAdd\"\r\n            @imgDel=\"$imgDel\"\r\n            ref=\"md\" \r\n        />\r\n\r\n        <section>\r\n            <date \r\n                @getDate=\"getDate\" \r\n                :originalDate=\"data.time\" \r\n                v-if=\"isReset\"\r\n            ></date>\r\n            <el-input\r\n                placeholder=\"文章摘要\"\r\n                v-model=\"data.describe\"\r\n                prefix-icon=\"el-icon-document\"\r\n                clearable>\r\n            </el-input>\r\n\r\n            <div class=\"upload-box\" v-if=\"!uploadToggle\">\r\n                <el-upload\r\n                    class=\"upload-demo\"\r\n                    :auto-upload=\"false\"\r\n                    :show-file-list=\"false\"\r\n                    :on-change=\"musicUpload\"\r\n                    action=\"\"\r\n                    drag\r\n                >\r\n                    <template v-if=\"data.music && data.music.url\">\r\n                        <i class=\"el-icon-headset\"></i>\r\n                        <div class=\"el-upload__text\">{{data['music'].name}}</div>\r\n                    </template>\r\n                    <template v-else>\r\n                        <i class=\"el-icon-headset\"></i>\r\n                        <div class=\"el-upload__text\">背景音乐</div>\r\n                    </template>\r\n                </el-upload>\r\n                <el-upload\r\n                    class=\"upload-demo\"\r\n                    :auto-upload=\"false\"\r\n                    :show-file-list=\"false\"\r\n                    :on-change=\"imgUpload\"\r\n                    action=\"\"\r\n                    drag\r\n                >\r\n                    <img v-if=\"data.image && data.image.url\" :src=\"data.image.url\">\r\n                    <i class=\"el-icon-picture-outline-round\"></i>\r\n                    <div class=\"el-upload__text\">封面图片 (680*440)</div>\r\n                </el-upload>\r\n            </div>\r\n            <template v-else>\r\n                <el-input\r\n                    placeholder=\"音乐地址\"\r\n                    v-model=\"data.music.url\"\r\n                    prefix-icon=\"el-icon-headset\"\r\n                    clearable>\r\n                </el-input>\r\n                <el-input\r\n                    placeholder=\"封面图片\"\r\n                    prefix-icon=\"el-icon-picture-outline-round\"\r\n                    v-model=\"data.image.url\"\r\n                    clearable>\r\n                </el-input>\r\n            </template>\r\n\r\n            <el-switch\r\n                v-model=\"uploadToggle\"\r\n                active-text=\"输入链接\"\r\n                inactive-text=\"文件上传\"\r\n            >\r\n            </el-switch>\r\n\r\n            <el-switch\r\n                v-model=\"data.hide\"\r\n                inactive-text=\"发布文章\"\r\n                active-text=\"隐藏文章\">\r\n            </el-switch>\r\n        </section>\r\n\r\n        <el-button type=\"primary\" class=\"submit\" @click=\"submit\">SUBMIT</el-button>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport date from '@/components/date'\r\nimport { mapState } from 'vuex'\r\nimport { mavonEditor } from 'mavon-editor'\r\nimport 'mavon-editor/dist/css/index.css'\r\nexport default {\r\n    components: {\r\n        date,\r\n        mavonEditor\r\n    },\r\n    data() {\r\n        return {\r\n            data: {\r\n                title: '',              // 标题\r\n                content: '',            // 内容\r\n                contentHtml: '',        // 内容解析html\r\n                describe: '',           // 文章摘要\r\n                time: '',               // 时间\r\n                image: {},              // 图片\r\n                music: {},              // 音乐\r\n                hide: false,            // 隐藏\r\n            },\r\n            isReset: true,\r\n            id: '',                     // 当前文章id（编辑）\r\n\r\n            upload: {},\r\n            uploadToggle: false,\r\n\r\n            fullscreenLoading: false,\r\n            loading: ''\r\n        }\r\n    },\r\n    created(){\r\n        this.id = this.$route.query.id;\r\n        if(this.id) this.loadData(this.id);\r\n    },\r\n    watch: {\r\n        'data.image.url': {\r\n            handler(val) {\r\n                if(!val){\r\n                    delete this.upload['image']\r\n                }\r\n            }\r\n        },\r\n        'data.music.url': {\r\n            handler(val) {\r\n                if(!val){\r\n                    delete this.upload['music']\r\n                }\r\n            }\r\n        }\r\n    },\r\n    computed: {\r\n        ...mapState(['$data'])\r\n    },\r\n    methods: {\r\n        musicUpload(file){\r\n            this.uploads('music', file)\r\n        },\r\n        imgUpload(file){\r\n            this.uploads('image', file)\r\n        },\r\n        // 保存临时文件\r\n        uploads(type, file){\r\n            const name = type == 'music' ? 'audio' : 'image';\r\n            if (!file.raw.type.includes(name)) {\r\n                this.$message.error(`请选择${name}格式的文件!`)\r\n                return\r\n            }\r\n            const formData = new FormData();\r\n            formData.append('file', file.raw);        \r\n            formData.append('type', this.$data.info.upload_type);    \r\n\r\n            this.$set(this.data, type, {\r\n                url: URL.createObjectURL(file.raw),\r\n                name: file.name\r\n            })\r\n\r\n            this.$set(this.upload, type, {\r\n                url: URL.createObjectURL(file.raw),\r\n                name: file.name,\r\n                formData\r\n            })\r\n        },\r\n        $imgAdd(pos, $file){\r\n           var formdata = new FormData();\r\n           formdata.append('file', $file);\r\n           formdata.append('type', this.$data.info.upload_type);\r\n\r\n           this.$http.post('/upload', formdata).then(res => {           \r\n               this.$refs.md.$img2Url(pos, res.data.url);\r\n            })\r\n        },\r\n        $imgDel(pos){\r\n            const data = {\r\n                url: pos[0],\r\n                type: this.$data.info.upload_type\r\n            }\r\n            this.$http.post('/delete_file', data)\r\n        },\r\n        change(value, render){\r\n            this.data.contentHtml = render;     // 解析的html\r\n            this.data.content = value;          // 输入的内容\r\n            this.data.words = value.length;     // 字数\r\n        },\r\n        async submit(){\r\n            const map = {\r\n                'title': '请输入标题',\r\n                'content': '请输入内容',\r\n                'time': '请选择时间',\r\n            }\r\n            for(let i in map){\r\n                if(!this.data[i]){\r\n                    this.$message.error(`${map[i]}`);\r\n                    return;\r\n                }\r\n            }\r\n\r\n            this.fullscreenLoading = true;\r\n            \r\n            // 上传文件\r\n            if(!this.uploadToggle){\r\n                for(let i in this.upload){\r\n                    const result = await this.$http.post('/upload', this.upload[i].formData);\r\n                    if(result.data.status == 100){\r\n                        this.data[i].url = result.data.url;\r\n                    }else{\r\n                        // 错误\r\n                        this.$message.error('图片上传失败, 请检查网络!');\r\n                        this.fullscreenLoading = false;\r\n                    }\r\n                }\r\n            }\r\n\r\n            // 摘要默认内容\r\n            const describe = this.data.describe;\r\n            this.data.describe = !describe ? this.data.content.slice(0, 60) + '...' : describe;\r\n\r\n            const type = this.id ? `article/${this.data._id}` : 'article';\r\n            const mesg = this.id ? '更新' : '发表';\r\n\r\n            // 网站和管理员的信息\r\n            const email = this.$data.info['email']\r\n            email.web_name = this.$data.info['web_name']\r\n            email.web_address = this.$data.info['address']\r\n\r\n            this.$http.post(type, {data: this.data, email}).then(res => {\r\n                setTimeout(() => {\r\n                    if(res.data.status === 1){\r\n                        this.$message({\r\n                            message: `${mesg}成功`,\r\n                            type: 'success'\r\n                        });\r\n                        this.$router.push('/article')\r\n                        this.$infoUpdate() // 刷新状态\r\n                    }else{\r\n                        this.$message.error(`${mesg}失败，请检查网络问题!`);\r\n                    }\r\n                    this.fullscreenLoading = false;\r\n                }, 500)\r\n            })\r\n        },\r\n        // 获取时间\r\n        getDate(val){\r\n            this.data.time = val;\r\n        },\r\n        // 获取当前文章的数据\r\n        async loadData(id){\r\n\r\n            this.loading = this.$loading({target: '.container'})\r\n\r\n            const res = await this.$http.get(`article/${id}`)\r\n\r\n            setTimeout(() => {\r\n                this.data = res.data.body;\r\n                this.isReset = false;\r\n                this.$nextTick(() => { this.isReset = true; })\r\n                this.loading.close()\r\n            }, 500)\r\n        },\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\nsection{\r\n    margin: 15px 0;\r\n    .el-switch, .el-input{\r\n        width: 100%;\r\n        height: 38px;\r\n        margin: 8px 0;\r\n    }\r\n}\r\n.markdown-body{\r\n    height: 65vh;\r\n    box-shadow: none !important;\r\n    border: 1px solid #eee !important;\r\n}\r\n.submit{\r\n    width: 200px;\r\n    height: 40px;\r\n    font-size: 14px;\r\n    color: #fff;\r\n}\r\n.upload-box{\r\n    display: flex;\r\n    margin: 10px -7px 6px;\r\n    .upload-demo{\r\n        width: 50%;\r\n        max-width: 360px;\r\n        margin: 0 7px;\r\n        /deep/ .el-upload{\r\n            width: 100%;\r\n            .el-upload-dragger{\r\n                width: 100%;\r\n                .el-icon-picture-outline-round,\r\n                .el-icon-headset{\r\n                    font-size: 46px;\r\n                    color: #c0c4cc;\r\n                    margin: 42px 0 14px;\r\n                    line-height: 50px;\r\n                    transition: all .3s;\r\n                }\r\n                .el-upload__text{\r\n                    color: #98999c;\r\n                    transition: all .3s;\r\n                }\r\n                &:hover{\r\n                    .el-icon-picture-outline-round, \r\n                    .el-upload__text, \r\n                    .el-icon-headset{\r\n                        color: #409EFF;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    img{\r\n        width: 100%;\r\n    }\r\n}\r\n/deep/ .el-switch__label{\r\n    color: #98999c;\r\n    font-weight: 400;\r\n    &.is-active{\r\n        color: #409EFF;\r\n    }\r\n}\r\n@media screen and (max-width: 600px) {\r\n    .markdown-body{\r\n        height: 90vh !important;\r\n        box-shadow: none !important;\r\n    }\r\n    section{\r\n        margin: 10px 0;\r\n        box-shadow: none;\r\n    }\r\n    .submit{\r\n        width: 150px;\r\n        height: 36px;\r\n        margin: 0 0 20px;\r\n        line-height: 36px;\r\n        padding: 0;\r\n    }\r\n    .upload-box .upload-demo /deep/ .el-upload .el-upload-dragger{\r\n        height: 130px;\r\n        .el-icon-picture-outline-round, .el-icon-headset{\r\n            font-size: 36px;\r\n            margin: 22px 0 10px;\r\n        }\r\n    }\r\n}\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./info.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./info.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./info.vue?vue&type=template&id=c318d98c&scoped=true&\"\nimport script from \"./info.vue?vue&type=script&lang=js&\"\nexport * from \"./info.vue?vue&type=script&lang=js&\"\nimport style0 from \"./info.vue?vue&type=style&index=0&id=c318d98c&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"c318d98c\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}