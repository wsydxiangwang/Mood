{"version":3,"sources":["webpack:///./src/views/article/info.vue?bfb7","webpack:///./src/views/article/info.vue?0a4d","webpack:///src/views/article/info.vue","webpack:///./src/views/article/info.vue?054f","webpack:///./src/views/article/info.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","directives","name","rawName","value","expression","modifiers","staticClass","attrs","model","data","callback","$$v","$set","ref","staticStyle","on","change","time","getDate","_e","submit","_v","staticRenderFns","components","date","mavonEditor","title","content","contentHtml","category","image","music","fullscreenLoading","isReset","id","methods","words","length","JSON","stringify","key","$delete","$http","put","_id","then","res","console","log","setTimeout","status","$message","message","type","$router","push","error","post","e","get","$nextTick","$route","query","loadData","component"],"mappings":"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","file":"js/chunk-12abcdb8.bf44b5d3.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./info.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./info.vue?vue&type=style&index=0&lang=scss&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"loading\",rawName:\"v-loading.fullscreen.lock\",value:(_vm.fullscreenLoading),expression:\"fullscreenLoading\",modifiers:{\"fullscreen\":true,\"lock\":true}}],staticClass:\"article-new\"},[_c('section',[_c('el-input',{attrs:{\"placeholder\":\"标题\",\"clearable\":\"\"},model:{value:(_vm.data.title),callback:function ($$v) {_vm.$set(_vm.data, \"title\", $$v)},expression:\"data.title\"}})],1),_c('mavon-editor',{ref:\"md\",staticStyle:{\"height\":\"70vh\"},attrs:{\"ishljs\":true,\"codeStyle\":\"monokai-sublime\"},on:{\"change\":_vm.change},model:{value:(_vm.data.content),callback:function ($$v) {_vm.$set(_vm.data, \"content\", $$v)},expression:\"data.content\"}}),_c('section',[(_vm.isReset)?_c('date',{attrs:{\"originalDate\":_vm.data.time},on:{\"getDate\":_vm.getDate}}):_vm._e(),_c('div',{staticClass:\"intro\"},[_c('el-input',{attrs:{\"placeholder\":\"文章摘要\",\"clearable\":\"\"},model:{value:(_vm.data.describe),callback:function ($$v) {_vm.$set(_vm.data, \"describe\", $$v)},expression:\"data.describe\"}})],1),_c('div',{staticClass:\"picture\"},[_c('el-input',{attrs:{\"placeholder\":\"音乐地址\",\"clearable\":\"\"},model:{value:(_vm.data.music),callback:function ($$v) {_vm.$set(_vm.data, \"music\", $$v)},expression:\"data.music\"}})],1),_c('div',{staticClass:\"picture\"},[_c('el-input',{attrs:{\"placeholder\":\"封面图片\",\"clearable\":\"\"},model:{value:(_vm.data.image),callback:function ($$v) {_vm.$set(_vm.data, \"image\", $$v)},expression:\"data.image\"}})],1)],1),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.submit}},[_vm._v(\"提交\")])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"article-new\" v-loading.fullscreen.lock=\"fullscreenLoading\">\n\n        <section>\n            <el-input\n                placeholder=\"标题\"\n                v-model=\"data.title\"\n                clearable>\n            </el-input>\n        </section>\n\n        <mavon-editor :ishljs=\"true\" codeStyle=\"monokai-sublime\" @change=\"change\" v-model=\"data.content\" ref=\"md\" style=\"height: 70vh\"/>\n\n        <section>\n            <date @getDate=\"getDate\" :originalDate=\"data.time\" v-if=\"isReset\"></date>\n\n            <div class=\"intro\">\n                <el-input\n                    placeholder=\"文章摘要\"\n                    v-model=\"data.describe\"\n                    clearable>\n                </el-input>\n            </div>\n            <div class=\"picture\">\n                <el-input\n                    placeholder=\"音乐地址\"\n                    v-model=\"data.music\"\n                    clearable>\n                </el-input>\n            </div>\n            <div class=\"picture\">\n                <el-input\n                    placeholder=\"封面图片\"\n                    v-model=\"data.image\"\n                    clearable>\n                </el-input>\n            </div>\n        </section>\n\n        <el-button type=\"primary\" @click=\"submit\">提交</el-button>\n    </div>\n</template>\n\n<script>\nimport date from '@/components/date'\nimport { mavonEditor } from 'mavon-editor'\nimport 'mavon-editor/dist/css/index.css'\nexport default {\n    components: {\n        date,\n        mavonEditor\n    },\n    data() {\n        return {\n            data: {\n                title: '',              // 标题\n                content: '',            // 内容\n                contentHtml: '',        // 内容解析html\n                time: {},               // 时间\n                category: '',           // 分类\n                image: '',              // 图片\n                music: '',              // 音乐\n            },\n            fullscreenLoading: false,\n            isReset: true,\n            id: ''                      // 当前文章id（编辑）\n        }\n    },\n    methods: {\n        change(value, render){\n            this.data.contentHtml = render;     // 解析的html\n            this.data.content = value;          // 输入的内容\n            this.data.words = value.length;     // 字数\n        },\n        submit(){\n            // 时间\n            if(!this.data.time || JSON.stringify(this.data.time) == '{}'){\n                this.$message.error('请选择时间');\n                return;\n            }\n            for(let key in this.data){\n                if(this.data[key] == ''){\n                    this.$delete(this.data, key)\n                }\n            }\n\n            this.fullscreenLoading = true;\n            \n            if(this.id){\n                this.$http.put(`article/${this.data._id}`, this.data).then(res => {\n                    console.log(res)\n                    setTimeout(() => {\n                        this.fullscreenLoading = false;\n                        if(res.data.status == 1){\n                            this.$message({\n                                message: '修改成功',\n                                type: 'success'\n                            });\n                            this.$router.push('/article')\n                        }else{\n                            this.$message.error('修改失败，请重新提交');\n                        }\n                    }, 1000)\n                })\n            }else{\n                this.$http.post('article', this.data).then(res => {\n                    setTimeout(() => {\n                        this.fullscreenLoading = false;\n                        this.$message({\n                            message: '发表成功',\n                            type: 'success'\n                        });\n                        this.$router.push('/article')\n                    }, 1000)\n                })\n            }\n        },\n        // 获取时间\n        getDate(e){\n            this.data.time = e;\n        },\n        // 获取当前文章的数据\n        async loadData(id){\n            const res = await this.$http.get(`article/${id}`)\n            this.data = res.data;\n            this.isReset = false;\n            this.$nextTick(() => {\n                this.isReset = true;\n            })\n        },\n    },\n    created(){\n        this.id = this.$route.query.id;\n        if(this.id) this.loadData(this.id);\n    }\n}\n</script>\n\n<style lang=\"scss\">\nsection{\n    padding: 10px;\n    margin: 20px 0;\n    border-radius: 4px;\n    box-shadow: rgba(0, 0, 0, 0.1) 0px 2px 12px 0px;\n    input{\n        width: 100%;\n        height: 38px;\n        padding: 0 10px;\n        border: 1px solid #eee;\n        margin: 10px 0;\n    }\n}\n.submit{\n    width: 200px;\n    height: 40px;\n    font-size: 14px;\n    margin-top: 20px;\n    border: none;\n    background: #2196F3;\n    color: #fff;\n}\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./info.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./info.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./info.vue?vue&type=template&id=3de237bc&\"\nimport script from \"./info.vue?vue&type=script&lang=js&\"\nexport * from \"./info.vue?vue&type=script&lang=js&\"\nimport style0 from \"./info.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}